# 运行库

以`linux`为例子，程序运行时依赖的库分为了动态库`.so`和静态库`.a`

## 动态库

动态函数库的扩展名一般为`.so`或`.dll`，这类函数库通常名为`libxxx.so`或`xxx.dll`

与静态函数库被整个捕捉到程序中不同，动态函数库在编译的时候，在程序里只有一个“指向”的位置而已，也就是说当可执行文件需要使用到函数库的机制时，程序才会去读取函数库来使用；也就是说可执行文件无法单独运行。这样从产品功能升级角度方便升级，只要替换对应动态库即可，不必重新编译整个可执行文件。

**优点：**

* 可实现不同进程间的资源共享
* 动态库升级简单，只需要替换库文件，无需重新编译应用程序
* 可以控制何时加载动态库，不调用库函数动态库不会被加载

**缺点：**

* 加载速度比静态库慢
* 发布程序需要提供依赖的动态库

## 静态库

一般扩展名为`.a`或`.lib`,这类的函数库通常扩展名为`libxxx.a`或`xxx.lib`

这类库在编译的时候会直接整合到目标程序中，所以利用静态函数库编译成的文件会比较大，这类函数库最大的优点就是编译成功的可执行文件可以独立运行，而不再需要向外部要求读取函数库的内容；但是从升级难易度来看明显没有优势，如果函数库更新，需要重新编译。

**优点：**

* 静态库被打包到应用程序中加载速度快
* 发布程序无需提供静态库，移植方便

**缺点：**

* 相同的库文件数据可能在内存中被加载多份，消耗系统资源，浪费内存
* 库文件更新需要重新编译项目文件，生成新的可执行程序，浪费时间
