# Git简述及常用命令

## 1. 什么是Git

> Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.
>
> Git是一个免费的开源分布式版本控制系统，旨在以快速和高效的方式处理从小型到超大型项目的所有内容。
>
> [Git官网]: https://git-scm.com/

## 2. Git常用命令

### 2.1 仓库管理

| 命令          | 作用                      | 备注 |
| ------------- | ------------------------- | ---- |
| **git init**  | 用于初始化一个 Git 仓库   | -    |
| **git clone** | 从现有 Git 仓库中拷贝项目 | -    |

### 2.2 提交与修改

| 命令                  | 作用                                   | 备注                                     |
| --------------------- | -------------------------------------- | ---------------------------------------- |
| **git status**        | 查看仓库当前的状态，显示有变更的文件   | -                                        |
| **git diff**          | 比较文件的不同，即暂存区和工作区的差异 | -                                        |
| **git add  <文件名>** | 添加文件到暂存区                       | `*`或`.`代表所有文件                     |
| **git commit**        | 将暂存区内容添加到仓库中               | 一般后面带着`-m "XXX"`添加本次提交的描述 |
| **git push**          | 提交本次修改和`commit`的描述           | -                                        |
| **git pull**          | 下载远程代码并合并                     | -                                        |

### 2.3 远程仓库操作

| 命令                                          | 说明                                                         | 备注 |
| :-------------------------------------------- | :----------------------------------------------------------- | ---- |
| **git remote**                                | 远程仓库操作                                                 | -    |
| **git remote -v**                             | 列出当前仓库中已配置的远程仓库，并显示它们的 URL             | -    |
| **git remote add <remote_name> <remote_url>** | 添加一个新的远程仓库。指定一个远程仓库的名称和 URL，将其添加到当前仓库中 | -    |
| **git remote rename <old_name> <new_name>**   | 将已配置的远程仓库重命名                                     | -    |
| **git remote remove <remote_name>**           | 从当前仓库中删除指定的远程仓库                               | -    |
| **git remote show <remote_name>**             | 显示指定远程仓库的详细信息，包括 URL 和跟踪分支              | -    |
| **git fetch**                                 | 从远程获取代码库                                             | -    |

### 2.4 分支管理

| 命令                       | 说明     | 备注                                       |
| :------------------------- | :------- | ------------------------------------------ |
| **git branch <分支名>**    | 创建分支 | 没有参数时`git branch`会列出你在本地的分支 |
| **git branch -d <分支名>** | 删除分支 | -                                          |
| **git checkout <分支名>**  | 切换分支 | -                                          |
| **git merge**              | 合并分支 | -                                          |

### 2.5 历史管理及查看

| 命令                                               | 说明                                 | 备注                                                         |
| :------------------------------------------------- | :----------------------------------- | ------------------------------------------------------------ |
| **git log**                                        | 查看历史提交记录                     | **--all** 选项显示所有分支的历史记录<br />**--oneline** 选项将会以简洁的单行显示每个提交<br />**--decorate** 选项用来显示分支和标签的名称<br />**-(n)** 仅显示最近的 `n` 条提交<br />**--author** 仅显示指定作者相关的提交<br />**--committer** 仅显示指定提交者相关的提交<br />**--no-merges** 过滤`merge commit` |
| **git blame  <文件名>**                            | 以列表形式查看指定文件的历史修改记录 | **-L <行号>,<行号>**查看文件指定范围的提交记录               |
| **git reset [--soft \| --mixed \| --hard] [HEAD]** | git reset 命令语法格式               | **--hard** 参数撤销工作区中所有未提交的修改内容，将暂存区与工作区都回到上一次版本，并删除之前的所有信息提交<br />**--soft** 参数用于回退到某个版本<br />**--mixed** 为默认，可以不用带该参数，用于重置暂存区的文件与上一次的提交`commit`保持一致，工作区文件内容保持不变 |
| **git reset HEAD^**                                | 回退所有内容到上一个版本             | `HEAD`后的参数可使用`~<数字>`，代表回退几个版本，如使用`^`代表回退一个版本 |
| **git reset HEAD^ <文件名>**                       | 回退指定文件的版本到上一个版本       | -                                                            |
| **git  reset  <提交SHA值>**                        | 回退到指定版本                       | `提交SHA值`可通过`git log`命令查看                           |

## 3. Git仓库

### 3.1 工作区`Workspace`

就是我们当前工作空间，也就是我们当前能在本地文件夹下面看到的文件结构。初始化工作空间或者工作空间`clean`的时候，文件内容和暂存区是一致的，随着修改，工作区文件在没有`add`到暂存区时候，工作区将和暂存区是不一致的。

### 3.2 暂存区`Index`

老版本概念也叫 `Cache` 区，就是文件暂时存放的地方，所有暂时存放在暂存区中的文件将随着一个`commit`一起提交到本地仓库此时本地仓库里面文件将完全被暂存区所取代。暂存区是 git 架构设计中非常重要和难理解的一部分。

### 3.3 本地仓库`Repository`

`git` 是分布式版本控制系统，和其他版本控制系统不同的是他可以完全去中心化工作，你可以不用和中央服务器`remote server`进行通信，在本地即可进行全部离线操作，包括 `log，history，commit，diff` 等等。完成离线操作最核心是因为 git 有一个几乎和远程一样的本地仓库，所有本地离线操作都可以在本地完成，等需要的时候再和远程服务进行交互

### 3.4 远程仓库`Remote`

中心化仓库，所有人共享，本地仓库会需要和远程仓库进行交互，也就能将其他所有人内容更新到本地仓库把自己内容上传分享给其他人。结构大体和本地仓库一样

<img src="./img/01_git操作文件变化.png" alt="01_git操作文件变化" style="zoom:150%;" />
