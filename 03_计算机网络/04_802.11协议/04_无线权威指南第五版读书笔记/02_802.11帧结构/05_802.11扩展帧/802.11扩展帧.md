# 802.11扩展帧

[TOC]

## 概述

为了扩展帧通过增加新的子类型，为`60GHz` 频段特有的功能(如波束成形训练、定向通信管理)提供支持，同时保持与原有帧格式的兼容性，引入了扩展帧(`Extended Frame`)，它支持波束成形(`Beamforming`)训练、定向链路维护等高级管理功能，同时保持了与核心`802.11` 架构的兼容性

`802.11`帧在帧头的类型和子类型字段共同定义了一个帧

### 类型(Type)字段

| 比特值 | 帧类型 | 作用                       |
| ------ | ------ | -------------------------- |
| `00`   | 管理帧 | 发现接入点并加入基本服务集 |
| `01`   | 控制帧 | 确认传输成功并保留无线介质 |
| `10`   | 数据帧 | 携带上层`MSDU`净荷         |
| `11`   | 扩展帧 | 一种新的、灵活的帧格式     |

### 扩展帧子类型(Subtype)字段

| 比特值      | 帧类型                       | 作用                                 |
| ----------- | ---------------------------- | ------------------------------------ |
| `0000`      | **定向信标帧**(`DMG Beacon`) | 用于`60 GHz`网络中扇区级的同步和发现 |
| `0001-1111` | **保留**(`Reserved`)         | 保留供未来使用                       |

## 扩展帧(Extension frame)的格式

> 笔者注：**详情见IEEE 802.11-2016 9.3.4.1**

`Extension frame`的格式如图所示。扩展帧的`MAC` 头部以帧控制(`Frame Control`)字段开始，后接`Duration` 字段。不同类型的扩展帧在`Duration` 字段之后可能包含不同数量和类型的字段

<img src="./img/Extension frame format.jpg" alt="Extension frame format" style="zoom:50%;" />

## 定向信标帧(DMG Beacon)

`DMG`信标帧可作为波束成形的训练帧使用或支持网络同步等功能

### DMG Beacon帧结构

> 笔者注：**详情见IEEE 802.11-2016 9.3.4.2**

<img src="./img/DMG Beacon.jpg" alt="DMG Beacon" style="zoom:50%;" />

**Duration字段：**被设置为距离信标传输间隔(`BTI`)结束所剩余的时间
**BSSID字段：**`BSSID`字段包含`BSSID`
**DMG 信标帧的帧体：**`Frame Body`字段见`IEEE 802.11-2016 Table 9-41—DMG Beacon frame body`

## 参考文档

> 《无线局域网权威指南 第五版》
>
> [80211-2016规范](https://github.com/Garfield-1/Books/blob/master/11_802.11协议规范/80211-2016.pdf)