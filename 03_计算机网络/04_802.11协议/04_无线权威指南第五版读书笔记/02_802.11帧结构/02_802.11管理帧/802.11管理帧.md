# 802.11管理帧

[TOC]

## 概述

无线终端使用管理帧加入和离开基本服务集，有线网络则不需要因为通过断开和连接网络电缆就可以实现相同目的。`802.11`管理帧又称为`MMPDU`，它不携带任何上层信息。`MMPDU`帧体并未封装`MSDU`，仅包含二层信息字段和信息元素。信息字段是固定长度的强制字段，而信息元素是可变长度的可选字段。

`IEEE 802.11-2016`标准定义了以下`14`种管理帧子类型

1. **关联请求帧**
2. **关联响应帧**
3. **重关联请求帧**
4. **重关联响应帧**
5. **探询请求帧**
6. **探询响应帧**
7. **信标帧**
8. **通知流量指示消息**
9. **取消关联帧**
10. **身份验证帧**
11. **解除身份验证帧**
12. **行动帧**
13. **无确认行动帧**
14. **定时通告帧**



## 关联请求帧



## 信标帧

信标帧是最重要的`802.11`帧类型之一，又称信标管理帧，它相当于无线网络的心跳消息。在基本服务集中，接入点广播信标帧，而客户端侦听信标帧；仅在`IBSS`(又称自组织模式)中，客户端才传输信标帧。所有信标帧都包含时间戳，客户端利用时间戳与接入点保持时钟同步。定时对于无线通信能否成功进行至关重要，因此所有终端必须彼此同步，这里列出信标帧包含的部分信息

| 信息类型          | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| 时间戳            | 同步信息                                                     |
| 扩频参数集        | 特定于`FHSS`、`DSSS`、`HR-DSSS`、`ERP`、`OFDM`、`HT`或`VHT`的信息 |
| `SSID`            | 无线局域网逻辑名                                             |
| 数据速率          | 基本速率和支持速率                                           |
| 服务集功能        | 额外的`BSS`或`IBSS`参数                                      |
| 信道信息          | 接入点或`IBSS`使用的信道                                     |
| 流量指示图(`TIM`) | 节点过程使用的字段                                           |
| `BSS`负载         | `802.11e`修正案定义的字段，能有效指示信道利用率              |
| `QoS`功能         | 服务质量(`QoS`)和增强型分布式信道访问(`EDCA`)信息            |
| `RSN`功能         | `TKIP`或`CCMP`密码和身份验证机制                             |
| `HT`与`VHT`功能   | `802.11n`和`802.11ac`功能                                    |
| 供应商专有信息    | 供应商唯一特定于供应商的信息                                 |

信标帧包含客户端在加入基本服务集前需要了解的所有重要信息。信标帧每隔`102.4`毫秒(目标时间)发送一次，这意味着接入点大约每秒发送`10`次信标帧。接入点可以调整信标间隔，但是无法禁用这个参数。大部分情况下，增加信标间隔可能对客户端连接性能造成不利影响，接入点利用信标帧向客户端通告基本服务集的所有配置功能。如果接入点配置有多个服务集标识符(`SSID`),它将向每个`SSID`发送信标帧

客户端必须首先发现接入点才能进行连接，可以通过**侦听接入点(被动扫描)或者搜索接入点(主动扫描)来发现接入点**

## 身份验证帧

在`802.11`客户端通过接入点向网络中的其他设备传输流量前，必须按顺序验证身份并建立关联。这种身份认证类似于将以太网电缆插入墙壁插孔，`802.11`身份验证只是为了客户端与接入点之间建立初步连接，相当于验证两台设备是否属于有效的`802.11`设备

`802.11`原始标准定义了两种不同的身份验证机制

1. **共享密钥身份验证**

    共享密钥身份验证采用`WEP`验证客户端的身份，客户端和接入点都要配置静态`WEP`密钥。**现在WEP早已过时，共享密钥身份验证也不再使用**

2. **开放系统身份验证**

    开放系统身份验证不对客户端的身份做任何验证，本质上属于客户端与接入点之间的问候交换过程

## 关联帧

客户端向接入点验证自己的身份后，接下来将与接入点建立关联，关联到接入点的客户端成入点发送关联请求帧，请求加入基本服务集；接入点向客户端发送关联响应帧，批准或拒绝客户端的请求

关联请求帧和关联响应帧也可用作接入点与客户端之间的最终功能通知

## 重关联帧

客户端决定漫游到新接入点时，将向新接入点发送重关联请求帧。客户端利用重关联请求帧从目前的基本服务集切换到新的基本服务集，这种管理帧实际上属于客户端发送给目标接入点的漫游请求

## 取消关联帧

取消关联帧属于通知而非请求，如果客户端希望取消与接入点的关联，或接入点希望取消与客户端的关联，将向对方发送取消关联帧。所有取消关联帧都包括原因代码(`reason code`)，用于解释取消的原因

## 解除身份验证帧

与取消关联类似，解除身份验证也属于通知而非请求。如果客户端希望解除与接入点的身份验证，或接入点希望解除与客户端的身份验证，将向对方发送解除身份验证帧。由于身份验证是建立关联的先决条件，因此解除身份验证会自动取消关联

## 行动帧

行动帧用于触发基本服务集中的特定操作，可由接入点或客户端发送，旨在为准备执行的操作提供信息和指示。`802.11h`修正案由此引入行动帧，随着`802.11`技术的发展，需要新的管理帧来携带信息并触发特定操作。使用行动帧就能完成这项任务，而不必创建新的管理帧

## 参考文档

> 《无线局域网权威指南 第五版》