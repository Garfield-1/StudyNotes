# 802.11管理帧

[TOC]

## 概述

无线终端使用管理帧加入和离开基本服务集，有线网络则不需要因为通过断开和连接网络电缆就可以实现相同目的。`802.11`管理帧又称为`MMPDU`，它不携带任何上层信息。`MMPDU`帧体并未封装`MSDU`，仅包含二层信息字段和信息元素。信息字段是固定长度的强制字段，而信息元素是可变长度的可选字段

`802.11`帧在帧头的类型和子类型字段共同定义了一个帧

### 类型字段

| 比特值 | 帧类型 | 作用                       |
| ------ | ------ | -------------------------- |
| `00`   | 管理帧 | 发现接入点并加入基本服务集 |
| `01`   | 控制帧 | 确认传输成功并保留无线介质 |
| `10`   | 数据帧 | 携带上层`MSDU`净荷         |
| `11`   | 扩展帧 | 一种新的、灵活的帧格式     |

### 管理帧子类型

| 比特值 | 帧类型                                   | 作用                                                         |
| ------ | ---------------------------------------- | ------------------------------------------------------------ |
| `0000` | **关联请求**(`Association Request`)      | `STA`向`AP`请求加入`BSS`                                     |
| `0001` | **关联响应**(`Association Response`)     | `AP`回应`STA`的关联请求(成功/失败 +`AID`)                    |
| `0010` | **重关联请求**(`Reassociation Request`)  | `STA`在漫游时从一个`AP`切换到另一个`AP`时发送，保留原关联上下文(如`IP`地址) |
| `0011` | **重关联响应**(`Reassociation Response`) | 目标`AP`对重关联请求的回应                                   |
| `0100` | **探测请求**(`Probe Request`)            | `STA`主动扫描时广播，用于发现附近`AP`                        |
| `0101` | **探测响应**(`Probe Response`)           | `AP`收到`Probe Request`后回复自身信息(SSID、速率、能力等)    |
| `0110` | **时间通告帧**(`Timing Advertisement`)   | 用于时间同步(如在`TV`白频段或特定工业应用中)，较少见         |
| `0111` | **保留**(`Reserved`)                     | 未使用                                                       |
| `1000` | **信标帧**(`Beacon`)                     | `AP`定期广播，宣告网络存在，包含`SSID`、`TIM`(省电调度)、能力等 |
| `1001` | **通知传输指示消息帧**(`ATIM`)           | 仅用于`IBSS`(`Ad-hoc`模式)，通知休眠节点有缓存数据           |
| `1010` | **解除关联帧**(`Disassociation`)         | 通知对方终止逻辑连接(但认证仍有效)。可由`STA`或`AP`发起      |
| `1011` | **身份认证帧**(`Authentication`)         | 用于开放系统认证或共享密钥认证(`WEP`时代)，现代`WPA/WPA2`使用`802.1X/EAP`，但此帧仍存在 |
| `1100` | **解除身份认证帧**(`Deauthentication`)   | 终止认证状态(比`Disassociation`更彻底)，常用于踢出客户端或安全断开 |
| `1101` | **动作帧**(`Action`)                     | 用于高级功能交互，如`QoS`(`ADDTS`)、波束成形、无线多跳(`Mesh`)、`TDLS`、`WNM`等 |
| `1110` | **无确认动作帧**(`Action No Ack`)        | 与`Action`类似，但不要求接收方`ACK`(用于广播或多播场景)      |
| `1111` | **保留**(`Reserved`)                     | 未使用                                                       |



## 关联请求帧(Association Request)

客户端向接入点验证自己的身份后，接下来将与接入点建立关联，关联到接入点的客户端成入点发送关联请求帧，请求加入基本服务集；接入点向客户端发送关联响应帧，批准或拒绝客户端的请求

### Association Request帧内容

> 笔者注：Association Request帧中的元素是否被使用取决于具体情况，**详情见IEEE 802.11-2016文档9.3.3.6**

| 顺序   | 信息                                                    | 中文翻译                        | 概述                                                         | IEEE 802.11-2016文档详细解释对应章节或位置 |
| ------ | ------------------------------------------------------- | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------ |
| `1`    | `Capability Information`                                | 能力信息                        | `Capability Information`字段包含若干子字段，用于指示所请求或公布的可选能力 | `9.4.1.4`                                  |
| `2`    | `Listen Interval`                                       | 监听间隔                        | `Listen Interval`字段用于向接入点指示处于节能模式的`STA`在何种频率下唤醒以监听信标帧。该字段的值为`MLME-ASSOCIATE`请求或`MLME-REASSOCIATE`请求原语中的“监听间隔”参数，单位为信标间隔。监听间隔字段的长度为`2`个八位字节 | `9.4.1.5`                                  |
| `3`    | `SSID`                                                  | 服务集标识符                    | `SSID`元素用于标识一个`ESS`(扩展服务集)或`IBSS`(独立基本服务集)的标识信息 | `9.4.2.2`                                  |
| `4`    | `Supported Rates and BSS Membership Selectors`          | 支持的速率与`BSS`成员选择器     | 声明支持的传输速率和加入`BSS`的能力门槛                      | `9.4.2.3`                                  |
| `5`    | `Extended Supported Rates and BSS Membership Selectors` | 扩展支持的速率与`BSS`成员选择器 | 列出额外的速率，还可以包含`BSS`成员资格选择器                | `9.4.2.13`                                 |
| `6`    | `Power Capability`                                      | 功率能力                        | `Power Capability`元素指定了一个`STA`在当前信道中能够进行传输的最小和最大发射功率 | `9.4.2.15`                                 |
| `7`    | `Supported Channels`                                    | 支持的信道                      | `Supported Channels`元素包含一个信道子带列表，表示`STA`能够工作的信道范围 | `9.4.2.18`                                 |
| `8`    | `Robust Security Network`                               | `RSN`                           | 一种仅允许建立健壮安全网络关联(`RSNA`)的安全网络。`RSN`可通过`Beacon frames中 Robust Security Network`元素的指示来识别，即其中指定的组播加密套件不是有线等效保密WEP | `P162`                                     |
| `9`    | `QoS Capability`                                        | `QoS`能力                       | `QoS Capability`元素包含多个子字段，用于在支持`QoS`的站点(`QoS STA`)中通告其可选的`QoS`功能 | `9.4.2.35`                                 |
| `10`   | `RM Enabled Capabilities`                               | `RM`启用的能力                  | `RM Enabled Capabilities`元素用于表明`STA`对无线射频测量的支持 | `9.4.2.45`                                 |
| `11`   | `Mobility Domain`                                       | 移动域                          | `Mobility Domain`元素(`MDE`)包含移动域标识符(`MDID`)字段以及快速切换(`FT`)能力与策略(`FT Capability and Policy`)字段。`AP`使用`MDE`来声明其属于构成某一移动域的`AP`组，通告其对`FT`能力的支持，并发布其`FT`策略信息 | `9.4.2.47`                                 |
| `12`   | `Supported Operating Classes`                           | 支持的操作类别                  | `Supported Operating Classes`元素由`STA`用于通告其在本国所支持的操作类别 | `9.4.2.54`                                 |
| `13`   | `HT Capabilities`                                       | `HT`能力                        | `HT STA`通过发送`HT Capabilities`元素来声明其为`HT`站点      | `9.4.2.56`                                 |
| `14`   | `20/40 BSS Coexistence`                                 | `20/40 BSS`共存                 | `20/40 BSS Coexistence`元素被STA用于交换影响`20/40 MHz BSS`共存的信息。这一元素帮助`STA`之间就共存于同一频段内的操作参数进行信息交流，确保网络性能和稳定性，尤其是在同时支持`20 MHz`和`40 MHz`信道带宽的情况下 | `9.4.2.60`                                 |
| `15`   | `Extended Capabilities`                                 | 扩展能力                        | `Extended Capabilities`元素携带有关`STA`能力的信息，这些信息是对`Capability Information field`中指定能力的补充 | `9.4.2.27`                                 |
| `16`   | `QoS Traffic Capability`                                | `QoS`业务能力                   | `QoS Traffic Capability`元素提供了由非`AP QoS STA`产生的业务类型的信息，并被`QoS AP`用来指示关联的非`AP QoS STA`的访问类别 | `9.4.2.78`                                 |
| `17`   | `TIM Broadcast Request`                                 | `TIM`广播请求                   | `TIM Broadcast Request`元素包含非`AP`站点所请求的周期性`TIM`广播的相关信息 | `9.4.2.83、9.6.14.21`                      |
| `18`   | `Interworking`                                          | 互通功能                        | `Interworking`元素包含了`STA`的互通服务能力的信息            | `9.4.2.92`                                 |
| `19`   | `Multi-band`                                            | 多频段                          | `Multi-band`元素表明发送该元素的`STA`位于一个多频段设备中，该设备能够在不同于当前传输该元素所用频段、运行类别或信道的其他频段、运行类别或信道上工作 | `9.4.2.138`                                |
| `20`   | `DMG Capabilities`                                      | `DMG`能力                       | `DMG Capabilities`元素包含一个STA标识符以及若干字段，用于通告`DMG STA`对可选`DMG`功能的支持情况 | `9.4.2.128`                                |
| `21`   | `Multiple MAC Sublayers`                                | 多个`MAC`子层                   | 本设备在多链路操作中，是否为每个链路使用 独立的`MAC`子层实例 | `9.4.2.153`                                |
| `22`   | `VHT Capabilities`                                      | `VHT`能力                       | `VHT Capabilities`元素声明它是一个`VHT STA`。`VHT`能力元素包含了若干字段，用于通告`VHT STA`的`VHT`能力 | `9.4.2.158`                                |
| `23`   | `Operating Mode Notification`                           | 操作模式通知                    | `Operating Mode Notification元素`用于通知其他`STA`：发送该元素的`STA`正在更改其一个或多个操作参数，包括操作信道带宽、可接收的最大空间流数量以及`LDPC`接收偏好 | `9.4.2.166、9.6.23.4`                      |
| `Last` | `Vendor Specific`                                       | 厂商特定信息                    | `Vendor Specific`元素用于在单一定义的格式内承载本标准中未定义的信息，以避免为非标准用途占用保留的元素标识符，并使得在存在非标准信息的情况下更容易实现互操作性 | `9.4.2.26`                                 |

##  关联响应(Association Response)

关联响应帧是`AP`对`STA`关联请求的正式答复，用于批准/拒绝连接、分配`AID`，并同步网络能力参数

### Association Response帧内容

> 笔者注：Association Response帧中的元素是否被使用取决于具体情况，**详情见IEEE 802.11-2016文档9.3.3.7**

| 顺序   | 信息                                                    | 中文翻译                        | 概述                                                         | IEEE 802.11-2016文档详细解释对应章节或位置 |
| ------ | ------------------------------------------------------- | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------ |
| `1`    | `Capability Information`                                | 能力信息                        | `Capability Information`字段包含若干子字段，用于指示所请求或公布的可选能力 | `9.4.1.4`                                  |
| `2`    | `Status code`                                           | 状态码                          | 状态码字段用于响应管理帧中，以指示所请求操作的成功或失败     | `9.4.1.9`                                  |
| `3`    | `AID`                                                   | `AID`(关联标识符)               | `AID`元素包含由接入点(`AP`)在关联过程中分配给`STA`的`AID`，用于表示该`STA`的`16`位标识符 | `9.4.2.164`                                |
| `4`    | `Supported Rates and BSS Membership Selectors`          | 支持的速率与`BSS`成员选择器     | 声明支持的传输速率和加入`BSS`的能力门槛                      | `9.4.2.3`                                  |
| `5`    | `Extended Supported Rates and BSS Membership Selectors` | 扩展支持的速率与`BSS`成员选择器 | 列出额外的速率，还可以包含`BSS`成员资格选择器(`BSS Membership Selectors`) | `9.4.2.13`                                 |
| `6`    | `EDCA Parameter Set`                                    | `EDCA`参数集                    | `EDCA Parameter Set`元素为`STA`在竞争周期(`CP`)内正确运行`QoS功能提供了所需的信息` | `9.4.2.29`                                 |
| `7`    | `RCPI`                                                  | `RCPI`(接收信道功率指示)        | `RCPI`元素表示接收`STA`接收到的帧的功率电平                  | `9.4.2.38`                                 |
| `8`    | `RSNI`                                                  | `RSNI`(接收信号噪声指示)        | `RSNI`元素包含一个`RSNI`(信噪比)值                           | `9.4.2.41`                                 |
| `9`    | `RM Enabled Capabilities`                               | `RM`启用的能力                  | `RM Enabled Capabilities`元素用于表明`STA`对无线射频测量的支持 | `9.4.2.45`                                 |
| `10`   | `Mobility Domain`                                       | 移动域                          | `Mobility Domain`元素(`MDE`)包含移动域标识符(`MDID`)字段以及快速切换(`FT`)能力与策略(FT Capability and Policy)字段。`AP`使用`MDE`来声明其属于构成某一移动域的`AP`组，通告其对`FT`能力的支持，并发布其`FT`策略信息 | `9.4.2.47`                                 |
| `11`   | `Fast BSS Transition`                                   | 快速`BSS`切换                   | 快速切换元素(`FTE`)包含在强健安全网络(`RSN`)中执行快速`BSS`切换期间所需的FT认证序列信息 | `9.4.2.48`                                 |
| `12`   | `DSE registered location`                               | `DSE`注册位置                   | `DSE`注册位置元素包含`DSE`位置配置信息(`LCI`)，其中包括纬度、经度和海拔信息 | `9.4.2.52`                                 |
| `13`   | `Timeout Interval(Association Comeback time)`           | 超时间隔(关联恢复时间)          | `Timeout Interval`元素用于指定时间间隔和超时值               | `9.4.2.49`                                 |
| `14`   | `HT Capabilities`                                       | `HT`能力                        | `HT STA`通过发送`HT Capabilities`元素来声明其为`HT`站点      | `9.4.2.56`                                 |
| `15`   | `HT Operation`                                          | `HT`操作                        | `BSS`中`HT`站点的操作由`HT`操作元素控制                      | `9.4.2.57`                                 |
| `16`   | `20/40 BSS Coexistence`                                 | `20/40 BSS`共存                 | `20/40 BSS Coexistence`元素被`STA`用于交换影响`20/40 MHz BSS`共存的信息。这一元素帮助`STA`之间就共存于同一频段内的操作参数进行信息交流，确保网络性能和稳定性，尤其是在同时支持`20 MHz`和`40 MHz`信道带宽的情况下 | `9.4.2.60`                                 |
| `17`   | `Overlapping BSS Scan Parameters`                       | 重叠`BSS`扫描参数               | 重叠`BSS`扫描参数元素由`AP`使用，用于指示`BSS`成员在执行`OBSS`扫描操作时应使用的值 | `9.4.2.59`                                 |
| `18`   | `Extended Capabilities`                                 | 扩展能力                        | `Extended Capabilities`元素携带有关`STA`能力的信息，这些信息是对`Capability Information field`中指定能力的补充 | `9.4.2.27`                                 |
| `19`   | `BSS Max Idle Period`                                   | `BSS`最大空闲周期               | `BSS`最大空闲周期元素包含了一个时间间隔，表示非`AP STA`在未向`AP`发送任何帧的情况下可保持的最大空闲时间 | `9.4.2.79`                                 |
| `20`   | `TIM Broadcast Response`                                | `TIM`广播响应                   | `TIM`广播响应元素包含有关`AP`周期性`TIM`广播的信息           | `9.4.2.84`                                 |
| `21`   | `QoS Map`                                               | `QoS`映射                       | 用于提供高层服务质量(`QoS`)构造到本标准中定义的数据帧传输所使用的用户优先级(`User Priority`)之间的映射 | `9.4.2.95`                                 |
| `22`   | `QMF Policy`                                            | `QMF`策略                       | `QMF`策略帧采用动作帧(`Action frame`)格式，由请求`STA`发送给接收站点，并包含所附带的QMF策略 | `9.6.8.18`                                 |
| `23`   | `Multi-band`                                            | 多频段                          | `Multi-band元素`表明发送该元素的`STA`位于一个多频段设备中，该设备能够在不同于当前传输该元素所用频段、运行类别或信道的其他频段、运行类别或信道上工作 | `9.4.2.138`                                |
| `24`   | `DMG Capabilities`                                      | `DMG`能力                       | `DMG Capabilities元素`包含一个`STA`标识符以及若干字段，用于通告`DMG STA`对可选`DMG`功能的支持情况 | `9.4.2.128`                                |
| `25`   | `DMG Operation`                                         | `DMG`操作                       | 由`AP`或`PCP`提供的`BSS`运行参数                             | `9.4.2.129`                                |
| `26`   | `Multiple MAC Sublayers`                                | 多个`MAC`子层                   | 本设备在多链路操作中，是否为每个链路使用 独立的`MAC`子层实例 | `9.4.2.153`                                |
| `27`   | `Neighbor Report`                                       | 邻近报告                        | 帮助`STA`发现周围的`AP`信息，从而支持更智能的漫游和网络切换决策 | `9.4.2.37`                                 |
| `28`   | `VHT Capabilities`                                      | `VHT`能力                       | `VHT Capabilities`元素声明它是一个`VHT STA`。`VHT`能力元素包含了若干字段，用于通告`VHT STA`的`VHT`能力 | `9.4.2.158`                                |
| `29`   | `VHT Operation`                                         | 运行模式通知                    | `BSS`中`VHT`站点的操作由`HT`操作元素和`VHT`操作元素共同控制  | `9.4.2.159`                                |
| `30`   | `Operating Mode Notification`                           | 操作模式通知                    | `Operating Mode Notification`元素用于通知其他`STA`：发送该元素的STA正在更改其一个或多个操作参数，包括操作信道带宽、可接收的最大空间流数量以及`LDPC`接收偏好 | `9.4.2.166、9.6.23.4`                      |
| `31`   | `Future Channel Guidance`                               | 未来信道指引                    | 未来信道指引元素由`AP`、`IBSS`站点、网格站点或`PCP`使用，用于在发送`STA`更改操作信道的情况下，指导其他`STA`关于可能的未来信道的信息 | `9.4.2.175`                                |
| `Last` | `Vendor Specific`                                       | 厂商特定信息                    | `Vendor Specific`元素用于在单一定义的格式内承载本标准中未定义的信息，以避免为非标准用途占用保留的元素标识符，并使得在存在非标准信息的情况下更容易实现互操作性 | `9.4.2.26`                                 |



## 重关联请求(Reassociation Request)

客户端决定漫游到新接入点时，将向新接入点发送重关联请求帧。客户端利用重关联请求帧从目前的基本服务集切换到新的基本服务集，这种管理帧实际上属于客户端发送给目标接入点的漫游请求

### Reassociation Request帧内容

> 笔者注：Reassociation Request帧中的元素是否被使用取决于具体情况，**详情见IEEE 802.11-2016文档9.3.3.8**

| 顺序   | 信息                                                    | 中文翻译                        | 概述                                                         | IEEE 802.11-2016文档详细解释对应章节或位置 |
| ------ | ------------------------------------------------------- | ------------------------------- | ------------------------------------------------------------ | ------------------------------------------ |
| `1`    | `Capability Information`                                | 能力信息                        | `Capability Information`字段包含若干子字段，用于指示所请求或公布的可选能力 | `9.4.1.4`                                  |
| `2`    | `Listen Interval`                                       | 监听间隔                        | `Listen Interval`字段用于向接入点指示处于节能模式的 `STA` 在何种频率下唤醒以监听信标帧。该字段的值为 `MLME-ASSOCIATE` 请求或 `MLME-REASSOCIATE` 请求原语中的“监听间隔”参数，单位为信标间隔。监听间隔字段的长度为 `2` 个八位字节 | `9.4.1.5`                                  |
| `3`    | `Current AP address`                                    | 当前`AP`地址                    | 当前`AP`地址字段是该`STA`当前所关联的`AP`的`MAC`地址         | `9.4.1.5`                                  |
| `4`    | `SSID`                                                  | 服务集标识符                    | `SSID`元素用于标识一个`ESS`（扩展服务集）或`IBSS`（独立基本服务集）的标识信息 | `9.4.2.2`                                  |
| `5`    | `Supported Rates and BSS Membership Selectors`          | 支持的速率与`BSS`成员选择器     | 声明支持的传输速率和加入`BSS`的能力门槛                      | `9.4.2.3`                                  |
| `6`    | `Extended Supported Rates and BSS Membership Selectors` | 扩展支持的速率与`BSS`成员选择器 | 列出额外的速率，还可以包含 `BSS` 成员资格选择器              | `9.4.2.13`                                 |
| `7`    | `Power Capability`                                      | 功率能力                        | `Power Capability`元素指定了一个 `STA` 在当前信道中能够进行传输的最小和最大发射功率 | `9.4.2.15`                                 |
| `8`    | `Supported Channels`                                    | 支持的信道                      | `Supported Channels`元素包含一个信道子带列表，表示`STA`能够工作的信道范围 | `9.4.2.18`                                 |
| `9`    | `RSN`                                                   | 强健安全网络                    | 一种安全网络，仅允许建立强健安全网络关联（`RSNA`）           | `P162`                                     |
| `10`   | `QoS Capability`                                        | `QoS`能力                       | `QoS Capability`元素包含多个子字段，用于在支持 `QoS` 的站点（`QoS STA`）中通告其可选的 `QoS` 功能 | `9.4.2.35`                                 |
| `11`   | `RM Enabled Capabilities`                               | `RM`启用的能力                  | `RM Enabled Capabilities`元素用于表明`STA`对无线射频测量的支持 | `9.4.2.45`                                 |
| `12`   | `Mobility Domain`                                       | 移动域                          | `Mobility Domain`元素（`MDE`）包含移动域标识符（`MDID`）字段以及快速切换（`FT`）能力与策略（`FT Capability and Policy`）字段。`AP`使用 `MDE` 来声明其属于构成某一移动域的 `AP` 组，通告其对 `FT` 能力的支持，并发布其 `FT` 策略信息 | `9.4.2.47`                                 |
| `13`   | `Fast BSS Transition`                                   | 移动域                          | 快速切换元素（`FTE`）包含在强健安全网络（`RSN`）中执行快速`BSS`切换期间所需的`FT`认证序列信息 | `9.4.2.47`                                 |
| `14`   | `Resource information container(RIC)`                   | 资源信息容器                    | 资源信息容器（`RIC`）指的是一组用于表达资源请求或响应的元素集合 | `13.11.2`                                  |
| `15`   | `Supported Operating Classes`                           | 支持的操作类别                  | `Supported Operating Classes`元素由`STA`用于通告其在本国所支持的操作类别 | `9.4.2.54`                                 |
| `16`   | `HT Capabilities`                                       | `HT`能力                        | `HT STA`通过发送 `HT Capabilities`元素来声明其为 `HT` 站点   | `9.4.2.56`                                 |
| `17`   | `20/40 BSS Coexistence`                                 | `20/40 BSS`共存                 | `20/40 BSS Coexistence`元素被`STA`用于交换影响 `20/40 MHz BSS` 共存的信息。这一元素帮助 `STA` 之间就共存于同一频段内的操作参数进行信息交流，确保网络性能和稳定性，尤其是在同时支持 `20 MHz` 和 `40 MHz` 信道带宽的情况下 | `9.4.2.60`                                 |
| `18`   | `Extended Capabilities`                                 | 扩展能力                        | `Extended Capabilities`元素携带有关STA能力的信息，这些信息是对`Capability Information field`中指定能力的补充 | `9.4.2.27`                                 |
| `19`   | `QoS Traffic Capability`                                | `QoS`业务能力                   | `QoS Traffic Capability`元素提供了由非 `AP QoS STA`产生的业务类型的信息，并被 `QoS AP` 用来指示关联的非 `AP QoS STA` 的访问类别 | `9.4.2.78`                                 |
| `20`   | `TIM Broadcast Request`                                 | `TIM`广播请求                   | `TIM Broadcast Request`元素包含非 `AP` 站点所请求的周期性 `TIM`广播的相关信息 | `9.4.2.83、9.6.14.21`                      |
| `21`   | `FMS Request`                                           | `FMS`请求                       | `FMS`请求元素定义了非`AP STA`所请求的组播帧的相关信息        | `9.4.2.76`                                 |
| `22`   | `DMS Request`                                           | `DMS`请求                       | `DMS`请求元素定义了将作为单播帧传输的组播帧的相关信息        | `9.4.2.88`                                 |
| `23`   | `Interworking`                                          | 互通功能                        | `Interworking`元素包含了`STA`的互通服务能力的信息            | `9.4.2.92`                                 |
| `24`   | `Multi-band`                                            | 多频段                          | `Multi-band`元素表明发送该元素的`STA`位于一个多频段设备中，该设备能够在不同于当前传输该元素所用频段、运行类别或信道的其他频段、运行类别或信道上工作 | `9.4.2.138`                                |
| `25`   | `DMGCapabilities`                                       | `DMG`能力                       | `DMG Capabilities`元素包含一个`STA`标识符以及若干字段，用于通告`DMG STA`对可选`DMG`功能的支持情况 | `9.4.2.128`                                |
| `26`   | `Multiple MAC Sublayers`                                | 多个`MAC`子层                   | 本设备在多链路操作中，是否为每个链路使用 独立的 `MAC` 子层实例 | `9.4.2.153`                                |
| `27`   | `VHT Capabilities`                                      | `VHT`能力                       | `VHT Capabilities`元素声明它是一个`VHT STA`。`VHT`能力元素包含了若干字段，用于通告`VHT STA`的`VHT`能力 | `9.4.2.158`                                |
| `28`   | `Operating Mode Notification`                           | 运行模式通知                    | 操作模式通知元素用于通知`STA`，发送`STA`正在更改其一个或多个操作信道宽度、它可以接收的最大空间流数量以及其`LDPC`接收偏好 | `9.4.2.166`                                |
| `Last` | `Vendor Specific`                                       | 厂商特定信息                    | `Vendor Specific`元素用于在单一定义的格式内承载本标准中未定义的信息，以避免为非标准用途占用保留的元素标识符，并使得在存在非标准信息的情况下更容易实现互操作性 | `9.4.2.26`                                 |

## 重关联响应(Reassociation Response)

重关联响应帧是新`AP`对`STA`漫游请求的正式答复，用于批准/拒绝切换、分配新`AID`、同步网络参数，并最终确立`STA`与新`AP`的数据通路



## 探测请求(Probe Request)



## 探测响应(Probe Response)



## 时间通告帧(Timing Advertisement)



## 信标帧(Beacon)

信标帧是最重要的`802.11`帧类型之一，又称信标管理帧，它相当于无线网络的心跳消息。在基本服务集中，接入点广播信标帧，而客户端侦听信标帧；仅在`IBSS`(又称自组织模式)中，客户端才传输信标帧。所有信标帧都包含时间戳，客户端利用时间戳与接入点保持时钟同步。定时对于无线通信能否成功进行至关重要，因此所有终端必须彼此同步，这里列出信标帧包含的部分信息

| 信息类型          | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| 时间戳            | 同步信息                                                     |
| 扩频参数集        | 特定于`FHSS`、`DSSS`、`HR-DSSS`、`ERP`、`OFDM`、`HT`或`VHT`的信息 |
| `SSID`            | 无线局域网逻辑名                                             |
| 数据速率          | 基本速率和支持速率                                           |
| 服务集功能        | 额外的`BSS`或`IBSS`参数                                      |
| 信道信息          | 接入点或`IBSS`使用的信道                                     |
| 流量指示图(`TIM`) | 节点过程使用的字段                                           |
| `BSS`负载         | `802.11e`修正案定义的字段，能有效指示信道利用率              |
| `QoS`功能         | 服务质量(`QoS`)和增强型分布式信道访问(`EDCA`)信息            |
| `RSN`功能         | `TKIP`或`CCMP`密码和身份验证机制                             |
| `HT`与`VHT`功能   | `802.11n`和`802.11ac`功能                                    |
| 供应商专有信息    | 供应商唯一特定于供应商的信息                                 |

信标帧包含客户端在加入基本服务集前需要了解的所有重要信息。信标帧每隔`102.4`毫秒(目标时间)发送一次，这意味着接入点大约每秒发送`10`次信标帧。接入点可以调整信标间隔，但是无法禁用这个参数。大部分情况下，增加信标间隔可能对客户端连接性能造成不利影响，接入点利用信标帧向客户端通告基本服务集的所有配置功能。如果接入点配置有多个服务集标识符(`SSID`),它将向每个`SSID`发送信标帧

客户端必须首先发现接入点才能进行连接，可以通过**侦听接入点(被动扫描)或者搜索接入点(主动扫描)来发现接入点**



## 通知传输指示消息帧(ATIM)



## 解除关联帧(Disassociation)

取消关联帧属于通知而非请求，如果客户端希望取消与接入点的关联，或接入点希望取消与客户端的关联，将向对方发送取消关联帧。解除关联帧可以由`AP`主动发送，也可以由`STA`主动发送。所有取消关联帧都包括原因代码(`reason code`)，用于解释取消的原因

当对方不适合加入网络时，工作站会送出`Disassociation`(解除连接)或`Deauthentication`(解除身份认证)帧作为应答。这些帧当中包含一个长度`16bit`的`Reason Code`(原因代码)位，表示对方的做法有误

| 代码 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| `0`  | 保留，未使用<br>`Reserved; unused`                           |
| `1`  | 未指定<br/>`Unspecified`                                     |
| `2`  | 之前的身份认证无效<br/>`Prior authentication is not valid`   |
| `3`  | 工作站已经离开基本服务区或扩展服务区，目前已经接触身份认证<br/>`Station has left the basic service area or extendedservice area and is deauthenticated` |
| `4`  | 闲置计时器超时，且工作站已经解除连接<br/>`Inactivity timer expired and station was disassociated` |
| `5`  | 基站资源不足，因此解除连接<br/>`Disassociated due to insufficient resources at the access point` |
| `6`  | 从尚未认证的工作站所收到的帧类型或次类型不正确<br/>`Incorrect frame type or subtype received from unauthenticated station` |
| `7`  | 从尚未连接的工作站所收到的帧类型或者次类型不正确<br/>`Incorrect frame type or subtype received from unassociated station` |
| `8`  | 工作站已经离开基本服务区或扩展服务区，目前已经解除连接<br/>`Station has left the basic service area or extended service area and is disassociated` |
| `9`  | 在身份认证完成之前要求连接或者重新连接<br/>`Association or reassociation requested before authentication is complete` |
| `10` | `802.11h`无法接受`Power Capability`信息元素的设定值，因此解除连接<br/>`Disassociated because of unacceptable values in Power Capability元素` |
| `11` | `802.11h`无法接受`Supported Channels`信息元素的设定值，因此解除连接<br/>`Disassociated because of unacceptable values in Supported Channels元素` |
| `12` | 保留<br>`Reserved`                                           |
| `13` | `802.11i`信息元素不正确(`802.11i`所加入的原因代码， 因此应指`802.11i`的信息元素)<br/>`Invalid information元素 (added with 802.11i, and likely one of the 802.11i information elements` |
| `14` | `802.11i`数据完整性检验失败<br/>`Message integrity check failure` |
| `15` | `802.11i`四道密钥磋商超时<br/>`4-way keying handshake timeout` |
| `16` | `802.11i`群组密钥磋商超时<br/>`Group key handshake timeou`t  |
| `17` | `802.11i`四道磋商信息元素的安全参数与原始参数组合不符<br/>`4-way handshake information元素 has different security parameters from initial parameter set` |
| `18` | `802.11i`群组密码锁不正确<br/>`Invalid group cipher`         |
| `19` | `802.11i`成对密码锁不正确<br/>`Invalid pairwise cipher`      |
| `20` | `802.11i`身份认证与密钥管理协议不正确<br/>`Invalid Authentication and Key Management Protocol` |
| `21` | `802.11i`未支持的固安网络信息元素版本<br/>`Unsupported Robust Security Network Information Element (RSN IE) version` |
| `22` | `802.11i RSN IE`的性能项不正确<br/>`Invalid capabilities in RSN information元素` |
| `23` | `802.11i 802.1X`身份认证失败<br/>`802.1X authentication failure` |
| `24` | `802.11i`所设定的使用政策拒绝所提议的密钥锁组<br/>`Proposed cipher suite rejected due to configured policy` |
| `25` | 保留，未使用<br/>`Reserved; unused`                          |



## 身份认证帧(Authentication)

在`802.11`客户端通过接入点向网络中的其他设备传输流量前，必须按顺序验证身份并建立关联。这种身份认证类似于将以太网电缆插入墙壁插孔，`802.11`身份验证只是为了客户端与接入点之间建立初步连接，相当于验证两台设备是否属于有效的`802.11`设备

`802.11`原始标准定义了两种不同的身份验证机制

1. **共享密钥身份验证**

   共享密钥身份验证采用`WEP`验证客户端的身份，客户端和接入点都要配置静态`WEP`密钥。**现在WEP早已过时，共享密钥身份验证也不再使用**

2. **开放系统身份验证**

   开放系统身份验证不对客户端的身份做任何验证，本质上属于客户端与接入点之间的问候交换过程



## 解除身份认证帧(Deauthentication)

与取消关联类似，解除身份验证也属于通知而非请求。如果客户端希望解除与接入点的身份验证，或接入点希望解除与客户端的身份验证，将向对方发送解除身份验证帧。由于身份验证是建立关联的先决条件，因此解除身份验证会自动取消关联



## 行动帧(Action)

行动帧用于触发基本服务集中的特定操作，可由接入点或客户端发送，旨在为准备执行的操作提供信息和指示。`802.11h`修正案由此引入行动帧，随着`802.11`技术的发展，需要新的管理帧来携带信息并触发特定操作。使用行动帧就能完成这项任务，而不必创建新的管理帧



## 无确认动作帧(Action No Ack)



## 状态码(Status Code)



## 响应码(Reason Code)



## 参考文档

> 《无线局域网权威指南 第五版》
>
> [80211-2016规范](https://github.com/Garfield-1/Books/blob/master/11_802.11协议规范/80211-2016.pdf)