# 软件设计架构

> 笔者注：由于简中网络和hostapd官网上的大量资料，均是使用旧版本，这里分析时会结合0.5.10与2.9版本的hostapd共同分析
>
> 参考文档：
>
> [Hostapd 详解 | 老张的blog](https://samuelzq.github.io/2022/04/11/hostapd/)
>
> [hostapd: Developers' documentation for hostapd](https://w1.fi/hostapd/devel/index.html)
>
> [hostapd-devel.pdf](https://hostap.epitest.fi/hostapd/hostapd-devel.pdf)



## 软件架构图

<img src="./img/hostapd_软件架构图.png" alt="hostapd_软件架构图" />d

**概述：**

上图来自`hostapd`官网列出的一份`0.5.X`源码说明文档[hostapd-devel.pdf](https://hostap.epitest.fi/hostapd/hostapd-devel.pdf)，此版本时间约为`2008`年，这里仅作一份参考；

从上图中可以看到，整个`hostapd`的核心在于`event loop`模块，从名字可以看出这是一个循环事件的模块；其中各个协议的具体处理和驱动部分处理，均是模块化的处理在循环中去处理

遗憾的是官方文档并未单独去详细说明每个模块的作用与实现，这里必须结合源代码与三方资料进行分析。这里列出一份表格仅作参考（后续更新完善）

| 模块         | 主要作用                                                     |
| ------------ | ------------------------------------------------------------ |
| `event loop` | 核心循环，整个`hostapd`程序是一个大的循环，`event loop`提供了一个事件循环的组件 |
| `ctrl i/f`   | `cli`与`GUI`部分，本文不做讨论                               |
|              |                                                              |



## event loop模块



